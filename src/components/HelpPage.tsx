import React, { useState } from 'react';
import PageHeader from './PageHeader';
import { ChevronDownIcon } from './IconComponents';

interface FAQItem {
    q: string;
    a: React.ReactNode;
}

interface HelpCategory {
    name: string;
    items: FAQItem[];
}

const helpData: HelpCategory[] = [
    {
        name: 'شروع سریع',
        items: [
            {
                q: 'چگونه اولین کمپین خود را بسازم؟',
                a: (
                    <p>
                        ساده است! از داشبورد، روی دکمه «کمپین جدید» کلیک کنید یا هدف خود را در باکس دستیار هوش مصنوعی تایپ کنید. هوش مصنوعی می‌تواند یک پیش‌نویس کامل برای شما ایجاد کند. در غیر این صورت، شما از طریق یک فرآیند ۴ مرحله‌ای راهنمایی می‌شوید: ۱. انتخاب مخاطبان، ۲. ساخت پیام، ۳. تنظیم زمان‌بندی، و ۴. بررسی نهایی.
                    </p>
                ),
            },
        ],
    },
    {
        name: 'دستیار هوش مصنوعی',
        items: [
            {
                q: 'دستیار هوش مصنوعی چه کارهایی انجام می‌دهد؟',
                a: (
                    <p>
                        دستیار هوش مصنوعی ما برای سرعت بخشیدن به فرآیند ساخت کمپین شما طراحی شده است. کافی است هدف خود را با زبان ساده توصیف کنید (مثلاً «یک فروش ویژه برای آخر هفته اعلام کن»). هوش مصنوعی به طور خودکار موارد زیر را تولید می‌کند:
                        <ul className="list-disc list-inside mr-4 mt-2 space-y-1">
                            <li>مخاطب مناسب را از لیست‌های شما پیشنهاد می‌دهد.</li>
                            <li>یک موضوع اصلی و یک موضوع جایگزین برای تست A/B می‌نویسد.</li>
                            <li>یک متن ایمیل جذاب و متقاعدکننده ایجاد می‌کند.</li>
                            <li>بهترین زمان ارسال را بر اساس تحلیل داده‌ها پیشنهاد می‌دهد.</li>
                        </ul>
                    </p>
                ),
            },
            {
                q: 'چگونه می‌توانم از هوش مصنوعی برای نوشتن محتوای ایمیل استفاده کنم؟',
                a: (
                    <p>
                        در مرحله «ساخت پیام» کمپین، پس از نوشتن متن اولیه خود در ویرایشگر، می‌توانید روی دکمه «بهبود با هوش مصنوعی» کلیک کنید. این کار متن شما را برای وضوح، جذابیت و تأثیرگذاری بیشتر بازنویسی می‌کند. همچنین، می‌توانید از هوش مصنوعی برای دریافت «پیشنهاد موضوع» بر اساس محتوای ایمیل خود استفاده کنید.
                    </p>
                ),
            },
        ],
    },
    {
        name: 'مدیریت کمپین',
        items: [
            {
                q: 'تست A/B چیست و چگونه کار می‌کند؟',
                a: (
                    <p>
                        تست A/B به شما امکان می‌دهد دو نسخه مختلف از موضوع ایمیل خود را با بخش کوچکی از مخاطبان خود آزمایش کنید تا ببینید کدام یک عملکرد بهتری دارد. در مرحله ۲ (پیام)، می‌توانید تست A/B را فعال کنید، یک موضوع جایگزین (نسخه ب) بنویسید و اندازه گروه آزمون را تعیین کنید (مثلاً ۲۰٪). سیستم به طور خودکار به هر نیمه از گروه آزمون یک نسخه از موضوع را ارسال می‌کند. نسخه‌ای که نرخ باز شدن بالاتری داشته باشد، به طور خودکار برای بقیه مخاطبان شما ارسال می‌شود.
                    </p>
                ),
            },
            {
                q: 'آیا می‌توانم از قالب HTML خودم استفاده کنم؟',
                a: (
                    <p>
                        بله! در مرحله «ساخت پیام»، گزینه «آپلود HTML» را انتخاب کنید. شما می‌توانید فایل .html خود را مستقیماً آپلود کنید. ما یک پیش‌نمایش زنده از فایل شما نمایش خواهیم داد تا بتوانید قبل از ارسال، ظاهر آن را بررسی کنید.
                    </p>
                ),
            },
            {
                q: 'معنی وضعیت‌های مختلف کمپین چیست و چگونه می‌توانم آن را پیگیری کنم؟',
                a: (
                    <>
                        <p>
                            شما می‌توانید وضعیت تمام کمپین‌های خود را در صفحه «کمپین‌ها» مشاهده کنید. هر کمپین یک وضعیت دارد که نشان می‌دهد در کجای فرآیند قرار دارد. در اینجا راهنمای هر وضعیت آمده است:
                        </p>
                        <ul className="list-disc list-inside mr-4 mt-2 space-y-2">
                            <li><strong>انتخاب مشترکین (Targeting):</strong> این اولین مرحله است. شما در حال انتخاب مخاطبان برای کمپین خود هستید. برای ادامه، باید حداقل یک گروه مخاطب را انتخاب کرده و روی «ذخیره و ادامه» کلیک کنید.</li>
                            <li><strong>ویرایش کمپین (Editing):</strong> در این مرحله، شما در حال نوشتن موضوع و محتوای ایمیل خود هستید. پس از اتمام، روی «ذخیره و ادامه» کلیک کنید.</li>
                            <li><strong>زمانبندی شده (Scheduled):</strong> شما در حال تنظیم تاریخ و ساعت ارسال کمپین خود هستید. پس از انتخاب زمان، روی «تایید زمانبندی» کلیک کنید تا به مرحله بعد بروید.</li>
                            <li><strong>ثبت و پرداخت (Payment):</strong> این مرحله بررسی نهایی است. شما تمام جزئیات کمپین و هزینه آن را مشاهده می‌کنید. برای نهایی کردن، باید روی «پرداخت و نهایی کردن» کلیک کنید.</li>
                            <li><strong>در صف ارسال (Processing):</strong> تبریک! کمپین شما قفل شده و منتظر رسیدن به زمان ارسال برنامه‌ریزی شده است. در این مرحله، سیستم به طور خودکار ارسال را انجام خواهد داد.</li>
                            <li><strong>در حال ارسال (Sending):</strong> کمپین شما در حال ارسال فعال به مشترکین است. این فرآیند ممکن است بسته به اندازه لیست شما کمی طول بکشد.</li>
                            <li><strong>تکمیل ارسال‌ها (Completed):</strong> تمام ایمیل‌ها ارسال شده‌اند. اکنون می‌توانید با کلیک روی کمپین، به صفحه گزارشات بروید و عملکرد آن را مشاهده کنید.</li>
                        </ul>
                    </>
                ),
            },
        ],
    },
    {
        name: 'حساب کاربری',
        items: [
            {
                q: 'چگونه اطلاعات پروفایل خود را ویرایش کنم؟',
                a: (
                    <p>
                        روی آیکون پروفایل در گوشه بالا سمت چپ هدر کلیک کنید تا به صفحه «پروفایل کاربری» بروید. در آنجا می‌توانید نام، اطلاعات شرکت، وب‌سایت و موبایل خود را ویرایش کنید. همچنین می‌توانید تنظیمات نمایش (تم روشن/تیره) و تنظیمات اعلان‌ها را تغییر دهید. فراموش نکنید که پس از ایجاد تغییرات، روی دکمه «ذخیره تغییرات» کلیک کنید.
                    </p>
                ),
            },
            {
                q: 'چگونه رمز عبور خود را تغییر دهم؟',
                a: (
                     <p>
                        در صفحه «پروفایل کاربری»، روی دکمه «تغییر رمز عبور» کلیک کنید. یک پنجره باز می‌شود که از شما می‌خواهد رمز عبور فعلی و رمز عبور جدید خود را وارد کنید. پس از تأیید، رمز عبور شما به‌روزرسانی خواهد شد.
                    </p>
                ),
            },
        ],
    },
];

interface AccordionItemProps {
    item: FAQItem;
    isOpen: boolean;
    onClick: () => void;
}

const AccordionItem: React.FC<AccordionItemProps> = ({ item, isOpen, onClick }) => {
    return (
        <div className="border-b border-slate-200 dark:border-slate-700">
            <button
                onClick={onClick}
                className="flex justify-between items-center w-full py-5 text-right"
                aria-expanded={isOpen}
            >
                <h3 className="text-lg font-semibold text-slate-800 dark:text-slate-200">{item.q}</h3>
                <ChevronDownIcon className={`w-6 h-6 text-slate-500 transition-transform duration-300 ${isOpen ? 'transform rotate-180' : ''}`} />
            </button>
            <div className={`overflow-hidden transition-all duration-300 ease-in-out ${isOpen ? 'max-h-96' : 'max-h-0'}`}>
                <div className="pb-5 text-base text-slate-600 dark:text-slate-400 space-y-4">
                    {item.a}
                </div>
            </div>
        </div>
    );
};

const HelpPage: React.FC = () => {
    const [openAccordion, setOpenAccordion] = useState<string>(helpData[0].items[0].q);

    const handleToggle = (question: string) => {
        setOpenAccordion(prev => (prev === question ? '' : question));
    };

    return (
        <div>
            <PageHeader 
                title="مرکز راهنمایی"
                description="پاسخ سوالات خود را پیدا کنید و یاد بگیرید چگونه از تمام امکانات پلتفرم ما استفاده کنید."
            />
            <div className="page-main-content">
                {helpData.map((category) => (
                    <div key={category.name} className="mb-12">
                        <h2 className="text-2xl font-bold text-slate-900 dark:text-white pb-4 border-b-2 border-brand-500 mb-4">{category.name}</h2>
                        <div className="space-y-2">
                             {category.items.map((item) => (
                                <AccordionItem 
                                    key={item.q}
                                    item={item}
                                    isOpen={openAccordion === item.q}
                                    onClick={() => handleToggle(item.q)}
                                />
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default HelpPage;