<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>جادوگر کمپین ایمیل</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @tailwind base;
        @tailwind components;
        @tailwind utilities;

        @layer base {
          /* 
          ==========================================================================
           BRAND COLOR THEME DEFINITION
          ==========================================================================
           To change the application's primary brand color, simply update the
           HSL (Hue, Saturation, Lightness) values below. All components will
           automatically adapt to the new color scheme.
          */
          :root {
            --brand-50: 221 100% 97%;
            --brand-100: 219 93% 93%;
            --brand-200: 217 91% 87%;
            --brand-300: 214 96% 78%;
            --brand-400: 214 94% 67%;
            --brand-500: 161 65% 55%;
            --brand-600: 221 83% 58%;
            --brand-700: 224 76% 48%;
            --brand-800: 225 73% 47%;
            --brand-900: 226 68% 38%;
            --brand-950: 224 57% 21%;
          }

          body {
            @apply min-h-screen bg-slate-50 dark:bg-black text-slate-800 dark:text-slate-200 transition-colors duration-300 font-sans antialiased text-base;
          }
        }

        @layer components {
          /* Page Layout */
          .page-container { @apply w-full max-w-7xl; }
          .app-container { @apply flex flex-col items-center justify-start p-4 sm:p-6 lg:p-8; }
          .page-main-content { @apply mt-12 bg-white dark:bg-slate-800/50 rounded-xl shadow-2xl dark:shadow-slate-950/50 ring-1 ring-black/5 dark:ring-white/10 p-6 sm:p-10; }

          /* Buttons */
          .btn { @apply rounded-md transition-colors duration-200 font-semibold inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed; }
          .btn-primary { @apply px-6 py-2 bg-brand-500 text-white hover:bg-brand-700; }
          .btn-secondary { @apply px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-500 dark:hover:bg-slate-500; }
          .btn-launch { @apply px-8 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white rounded-md hover:opacity-90 transition-opacity duration-200 font-bold text-lg; }
          .btn-ai { @apply flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-brand-500 to-brand-400 text-white rounded-lg font-semibold text-xl shadow-lg shadow-brand-500/30 dark:shadow-brand-400/20 transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 hover:shadow-2xl hover:shadow-brand-500/40 dark:hover:shadow-brand-400/30 active:translate-y-0 active:scale-100 active:shadow-lg disabled:!shadow-none disabled:hover:!translate-y-0 disabled:!scale-100; }
          .btn-ai-suggestion { @apply text-base px-3 py-1.5 bg-brand-100 text-brand-700 rounded-md hover:bg-brand-200 dark:bg-brand-900/40 dark:text-brand-300 dark:hover:bg-brand-900/60 disabled:cursor-wait flex items-center gap-2; }
          .btn-filter { @apply px-4 py-2 text-base rounded-full border transition-colors duration-200; }
          .btn-filter-selected { @apply bg-brand-500/20 border-brand-500 text-slate-800 dark:text-white; }
          .btn-filter-unselected { @apply bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300; }

          /* Cards */
          .card { @apply bg-slate-100 dark:bg-slate-900/70 p-6 rounded-xl border border-slate-200 dark:border-slate-800; }
          .card-category { @apply p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer; }
          .card-category-selected { @apply bg-brand-50 dark:bg-slate-700/80 border-brand-500; }
          .card-category-unselected { @apply bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-600; }
          .card-audience { @apply bg-white dark:bg-slate-800/50 rounded-xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 overflow-hidden flex flex-col sm:flex-row items-center p-5 transition-transform duration-300 hover:-translate-y-1; }
          .card-report { @apply bg-white dark:bg-slate-800/50 p-5 rounded-xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 flex flex-col sm:flex-row items-center justify-between transition-all duration-300 hover:shadow-xl hover:ring-brand-500/50 dark:hover:ring-brand-500 cursor-pointer; }
          .modern-stat-card { @apply bg-white/60 dark:bg-slate-800/60 backdrop-blur-lg rounded-2xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 p-6 flex flex-col justify-between transition-all duration-300 hover:-translate-y-1.5 hover:shadow-2xl cursor-pointer; }
          
          /* Inputs */
          .input { @apply w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-md p-3 text-slate-900 dark:text-white focus:ring-brand-500 focus:border-brand-500 transition-colors; }
          .input-range { @apply w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700; }
          .ai-input-container { @apply p-[2px] rounded-xl bg-gradient-to-br from-slate-300 to-slate-200 dark:from-brand-500 dark:to-brand-600 relative mt-4 shadow-inner; }
          .ai-hero-textarea {
            @apply w-full rounded-[10px] p-4 text-lg transition-colors resize-none border-none focus:ring-0;
            @apply bg-white text-slate-900 placeholder-slate-500; /* Light mode */
            @apply dark:bg-[#111827] dark:text-white dark:placeholder-slate-400; /* Dark mode */
          }

          /* Typography */
          .h2 { @apply text-2xl font-bold text-slate-900 dark:text-white; }
          .p-description { @apply text-lg text-slate-600 dark:text-slate-400 mb-8; }
          .label { @apply block text-base font-medium text-slate-700 dark:text-slate-300; }
          .summary-label { @apply text-base text-slate-500 dark:text-slate-400; }
          .summary-value { @apply text-xl font-semibold text-slate-900 dark:text-white; }

          /* Modals */
          .modal-overlay { @apply fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in; }
          .modal-container { @apply bg-slate-50 dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col; }
          .modal-header { @apply flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-800; }
          .modal-content { @apply flex-grow p-6 lg:p-8 overflow-y-auto space-y-6; }
          .modal-footer { @apply p-6 bg-slate-100 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-4; }

          /* Toggle Switch */
          .toggle-switch { @apply relative inline-flex h-6 w-11 items-center rounded-full transition-colors; }
          .toggle-switch-on { @apply bg-brand-600; }
          .toggle-switch-off { @apply bg-slate-400 dark:bg-slate-600; }
          .toggle-switch-handle { @apply inline-block h-4 w-4 transform rounded-full bg-white transition-transform; }
          .toggle-switch-handle-on { @apply -translate-x-6; }
          .toggle-switch-handle-off { @apply -translate-x-1; }
          .toggle-switch-ab-on { @apply bg-brand-500; }
          
          /* Health Indicators */
          .health-excellent { @apply text-green-500 dark:text-green-400 bg-green-100 dark:bg-green-900/50; }
          .health-good { @apply text-yellow-500 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/50; }
          .health-poor { @apply text-red-500 dark:text-red-400 bg-red-100 dark:bg-red-900/50; }
          .health-indicator-excellent { @apply bg-green-400; }
          .health-indicator-good { @apply bg-yellow-400; }
          .health-indicator-poor { @apply bg-red-400; }

          /* Toast Notifications */
          .toast { @apply flex items-center w-full max-w-xs p-4 space-x-4 space-x-reverse rounded-lg shadow-lg text-slate-500 bg-white dark:text-slate-400 dark:bg-slate-800 ring-1 ring-black/5 dark:ring-white/10; }
          .toast-success { @apply !bg-green-50 dark:!bg-green-900/50 !text-green-800 dark:!text-green-200; }
          .toast-error { @apply !bg-red-50 dark:!bg-red-900/50 !text-red-800 dark:!text-red-200; }
          .toast-info { @apply !bg-sky-50 dark:!bg-sky-900/50 !text-sky-800 dark:!text-sky-200; }
          .toast-icon { @apply inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg; }
          .toast-icon-success { @apply bg-green-100 text-green-500 dark:bg-green-800 dark:text-green-200; }
          .toast-icon-error { @apply bg-red-100 text-red-500 dark:bg-red-800 dark:text-red-200; }
          .toast-icon-info { @apply bg-sky-100 text-sky-500 dark:bg-sky-800 dark:text-sky-200; }
          
          /* Dashboard specific */
          .dashboard-icon-container { @apply w-12 h-12 rounded-lg flex items-center justify-center; }
          .feature-card { @apply bg-slate-100 dark:bg-slate-800/80 p-4 rounded-xl text-center flex flex-col items-center justify-center gap-2 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:bg-slate-200 dark:hover:bg-slate-700; }
          .subscriber-stat-card { @apply text-left p-6 bg-slate-100 dark:bg-slate-800/80 backdrop-blur-lg rounded-2xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 flex items-center justify-between; }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'sans-serif'],
                    },
                    colors: {
                        'brand': {
                          50: 'hsl(var(--brand-50) / <alpha-value>)',
                          100: 'hsl(var(--brand-100) / <alpha-value>)',
                          200: 'hsl(var(--brand-200) / <alpha-value>)',
                          300: 'hsl(var(--brand-300) / <alpha-value>)',
                          400: 'hsl(var(--brand-400) / <alpha-value>)',
                          500: 'hsl(var(--brand-500) / <alpha-value>)',
                          600: 'hsl(var(--brand-600) / <alpha-value>)',
                          700: 'hsl(var(--brand-700) / <alpha-value>)',
                          800: 'hsl(var(--brand-800) / <alpha-value>)',
                          900: 'hsl(var(--brand-900) / <alpha-value>)',
                          950: 'hsl(var(--brand-950) / <alpha-value>)',
                        },
                        'slate': {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                            950: '#020617',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in-up': 'slideInUp 0.5s ease-out',
                        'spin-slow': 'spin 2s linear infinite',
                        'toast-in': 'toastIn 0.5s ease-out forwards',
                        'toast-out': 'toastOut 0.5s ease-in forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: 0 },
                            '100%': { opacity: 1 },
                        },
                        slideInUp: {
                            '0%': { transform: 'translateY(20px)', opacity: 0 },
                            '100%': { transform: 'translateY(0)', opacity: 1 },
                        },
                        toastIn: {
                            '0%': { transform: 'translateX(100%)', opacity: 0 },
                            '100%': { transform: 'translateX(0)', opacity: 1 },
                        },
                        toastOut: {
                            '0%': { transform: 'translateX(0)', opacity: 1 },
                            '100%': { transform: 'translateX(100%)', opacity: 0 },
                        }
                    }
                }
            }
        }
    </script>
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "@google/genai": "https://esm.sh/@google/genai@^1.13.0",
    "recharts": "https://esm.sh/recharts@^3.1.2",
    "cors": "https://aistudiocdn.com/cors@^2.8.5",
    "express": "https://aistudiocdn.com/express@^5.1.0"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>